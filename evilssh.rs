use reqwest::blocking::Client;
use serde_json::json;
use ssh_keys::{gen_keypair, KeyPair};

fn main() {
    let (priv_key, pub_key) = gen_keypair().unwrap();

    let payload = json!({
    "content": "New SSH key generated!",
    "embeds": [
    {
    "title": "SSH Public Key",
    "description": pub_key,
    "color": 0x00ff00
    }
    ]
    });

    let client = Client::new().unwrap();
    //change your-webhook to your personal discord webhook url
    let res = client.post("your-webhook").json(&payload).send().unwrap();

    println!("Discord webhook response: {}", res.status());
}

// put this in the toml file
/*
[dependencies]
ssh_keys = "0.6.0"
reqwest = "0.11.6"
serde_json = "1.0.64"
*/
